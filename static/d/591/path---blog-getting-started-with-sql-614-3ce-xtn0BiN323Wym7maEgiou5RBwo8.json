{"data":{"site":{"siteMetadata":{"title":"","author":"Kyle Alwyn"}},"markdownRemark":{"id":"aba39817-9c64-5997-bb1d-54dc47968758","excerpt":"After working on the front end of apps for a few years, I’ve decided to take a deeper dive into the data that I’m displaying. What better…","html":"<p>After working on the front end of apps for a few years, I’ve decided to take a deeper dive into the data that I’m displaying. What better way to learn then to learn the language widely used to insert and retrieve the information directly from the databases.</p>\n<h2>Getting Started</h2>\n<p>SQL revolves around databases, tables, columns and rows. These are our staple keywords.</p>\n<h2>Queries</h2>\n<p>Queries are the bread and butter of SQL. Queries are essentially what the language was designed for: retrieving data from a database.</p>\n<h3>Select</h3>\n<p>All queries begin with a SELECT clause. This tells the database engine what information (columns in this case) you want returned in your results.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies</code></pre></div>\n<p>The asterisk means to return all columns from the chosen table. Therefore the previous query can be translated to, <strong>“Select all columns from the movies table.”</strong></p>\n<h3>Distinct</h3>\n<p>The <code class=\"language-text\">DISTINCT</code> clause is used return only unique values in the results set and filters out all duplicate values.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> genre <span class=\"token keyword\">FROM</span> movies<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Where</h3>\n<p>The <code class=\"language-text\">WHERE</code> clause allows you to filter the results to include only rows where a specified condition is true.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">WHERE</span> rating <span class=\"token operator\">></span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This will only return rows from the movies table where the rating column is greater than 8.</p>\n<h3>Like</h3>\n<p>The <code class=\"language-text\">LIKE</code> clause is useful when comparing similar values. It is typically used in conjunction with the <code class=\"language-text\">WHERE</code> caluse to search for a specific pattern within a column.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">WHERE</span> name <span class=\"token operator\">LIKE</span> <span class=\"token string\">'Spiderman'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This query will return any rows that have exactly ‘Spiderman’ in the name column. Sometimes, however, we don’t want to specify the exact matcher but would rather have an encompassing pattern. This is where we may use <em>special characters</em>:</p>\n<p><code class=\"language-text\">_</code> is used to allow substitution of any individual character. If we have LIKE ‘se_ven’ this will watch with ‘seven’ and ‘se7en’.</p>\n<p><code class=\"language-text\">%</code> is a wildcard that matches zero or more missing letters. If we have LIKE ’S%’, this will match ‘Spiderman’ and ‘Superman’ as they both begin with the letter ’s’.</p>\n<h3>Between</h3>\n<p>The <code class=\"language-text\">BETWEEN</code> clause is used to filter the result to a certain range. Values can be numbers text or dates.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">WHERE</span> name <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'A'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'J'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">year</span> <span class=\"token operator\">BETWEEN</span> <span class=\"token number\">1990</span> <span class=\"token operator\">AND</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Order By</h3>\n<p><code class=\"language-text\">ORDER BY</code> is used to sort the results of the query either alphabetically or numerically.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> rating <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>DESC is a keyword used to sort the results in descending order (high to low or Z-A). Use ASC to do the inverse (low to high or A-Z).</p>\n<h3>Limit</h3>\n<p>Some tables have thousands of rows but we may only want a small chunk of the records. For this, we use the <code class=\"language-text\">LIMIT</code> clause.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> movies\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> imdb_rating <span class=\"token keyword\">DESC</span>\n<span class=\"token keyword\">LIMIT</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Aggregate Functions</h2>\n<p>Now that we have taken a brief look at the basics of forming a SQL query, let’s take a look at some more advanced and useful queries. Aggregate functions will give us additional functionality in building our queries. They work by taking in a parameter (typically a column name) and acting upon it.</p>\n<h3>Count</h3>\n<p>Sometimes, we only desire to know how many rows exist for a query. We can use <code class=\"language-text\">COUNT</code> to retrieve this for us.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> fake_apps<span class=\"token punctuation\">;</span></code></pre></div>\n<p>We can even run our filtering clauses on the count</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> category<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">WHERE</span> downloads <span class=\"token operator\">></span> <span class=\"token number\">20000</span></code></pre></div>\n<h3>Group By</h3>\n<p><code class=\"language-text\">GROUP BY</code> is a clause in SQL that is only used with aggregate functions. It is used in collaboration with the <code class=\"language-text\">SELECT</code> statement to arrange identical data into groups.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> category<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">WHERE</span> downloads <span class=\"token operator\">></span> <span class=\"token number\">20000</span>\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> price</code></pre></div>\n<h3>Sum</h3>\n<p>We can easily add all the values for a particular column using the SUM clause</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> category<span class=\"token punctuation\">,</span> <span class=\"token function\">SUM</span><span class=\"token punctuation\">(</span>downloads<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> category<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Max</h3>\n<p><code class=\"language-text\">MAX</code> returns the largest value in a column. It takes the name of the column as a parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> name<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>downloads<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> category<span class=\"token punctuation\">;</span></code></pre></div>\n<p>This query returns the names of the most downloaded apps in each category</p>\n<h3>Min</h3>\n<p>Like you’d expect, the MIN clause performs the inverse of the MAX clause. It will return the smallest value of the column passed as an argument.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> name<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>downloads<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> category<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Avg</h3>\n<p>Use the AVG clause to calculate the average of a particular column. This will return a number and for obvious reasons will not work properly on TEXT fields</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> price<span class=\"token punctuation\">,</span> <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>downloads<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> price<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Round</h3>\n<p>ROUND() is a function that takes a column name and an integer as an argument. It rounds the values in the column to the number of decimal places specified by the integer. Here, we pass the column AVG(downloads) and 2 as arguments. SQL first calculates the average for each price and then rounds the result to two decimal places in the result set.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> price<span class=\"token punctuation\">,</span> <span class=\"token function\">ROUND</span><span class=\"token punctuation\">(</span><span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>downloads<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> fake_apps\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> price<span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Working With Multiple Tables</h2>\n<h3>Primary Keys</h3>\n<p>A primary key serves as a unique identifier for each row or record in a given table. The primary key is literally an id value for a record. We’re going to use this value to connect artists to the albums they have produced.</p>\n<p>By specifying that the id column is the PRIMARY KEY, SQL makes sure that:</p>\n<ul>\n<li>None of the values in this column are NULL</li>\n<li>Each value in this column is unique</li>\n</ul>\n<p>A table can not have more than one PRIMARY KEY column.</p>\n<h3>Foreign Keys</h3>\n<p>A foreign key is a column that contains the primary key of another table in the database. We use foreign keys and primary keys to connect rows in two different tables. One table’s foreign key holds the value of another table’s primary key. Unlike primary keys, foreign keys do not need to be unique and can be NULL.</p>\n<h3>Cross Join</h3>\n<p>One way to query multiple tables is to write a SELECT statement with multiple table names separated by a comma. This is also known as a cross join. Here, albums and artists are the different tables we are querying.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> albums<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> albums<span class=\"token punctuation\">.</span><span class=\"token keyword\">year</span><span class=\"token punctuation\">,</span> artists<span class=\"token punctuation\">.</span>name\n<span class=\"token keyword\">FROM</span> albums<span class=\"token punctuation\">,</span> artists<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Unfortunately the result of this cross join is not very useful. It combines every row of the artists table with every row of the albums table. It would be more useful to only combine the rows where the album was created by the artist.</p>\n<h3>Inner Join</h3>\n<p>In SQL, joins are used to combine rows from two or more tables. The most common type of join in SQL is an inner join.</p>\n<p>An inner join will combine rows from different tables if the join condition is true. Let’s look at the syntax to see how it works.</p>\n<ol>\n<li>SELECT * specifies the columns our result set will have. Here, we want to include every column in both tables.</li>\n<li>FROM albums specifies the first table we are querying.</li>\n<li>JOIN artists ON specifies the type of join we are going to use as well as the name of the second table. Here, we want to do an inner join and the second table we want to query is artists.</li>\n<li>albums.artist<em>id = artists.id is the join condition that describes how the two tables are related to each other. Here, SQL uses the foreign key column artist</em>id in the albums table to match it with exactly one row in the artists table with the same value in the id column. We know it will only match one row in the artists table because id is the PRIMARY KEY of artists</li>\n</ol>\n<h3>Left Join</h3>\n<p>Outer joins also combine rows from two or more tables, but unlike inner joins, they do not require the join condition to be met. Instead, every row in the left table is returned in the result set, and if the join condition is not met, then NULL values are used to fill in the columns from the right table.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> albums\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> artists <span class=\"token keyword\">ON</span>\n  albums<span class=\"token punctuation\">.</span>artist_id <span class=\"token operator\">=</span> artists<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The left table is simply the first table that appears in the statement. Here, the left table is albums. Likewise, the right table is the second table that appears. Here, artists is the right table.</p>\n<h4>Aliases</h4>\n<p>AS is a keyword in SQL that allows you to rename a column or table using an alias. The new name can be anything you want as long as you put it inside of single quotes. Here we want to rename the albums.name column as ‘Album’, and the artists.name column as ‘Artist’.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span>\n  albums<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">AS</span> <span class=\"token string\">'Album'</span><span class=\"token punctuation\">,</span>\n  albums<span class=\"token punctuation\">.</span><span class=\"token keyword\">year</span><span class=\"token punctuation\">,</span>\n  artists<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">AS</span> <span class=\"token string\">'Artist'</span>\n<span class=\"token keyword\">FROM</span> albums\n<span class=\"token keyword\">JOIN</span> artists <span class=\"token keyword\">ON</span>\n  albums<span class=\"token punctuation\">.</span>artist_id <span class=\"token operator\">=</span> artists<span class=\"token punctuation\">.</span>id\n<span class=\"token keyword\">WHERE</span> albums<span class=\"token punctuation\">.</span><span class=\"token keyword\">year</span> <span class=\"token operator\">></span> <span class=\"token number\">1980</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It is important to note that the columns have not been renamed in either table. The aliases only appear in the result set. This does not mutate the original record stored in the database. It merely alters the appearance of the record in the data set returned by the query.</p>\n<h2>Conclusion</h2>\n<p>This was merely a general overview of the most basic functions SQL has to offer. While it will get the ball rolling, much more work is needed to become professionally savvy in SQL. I will write further posts about using SQL to analyze business metrics and uncover opportunities. I’ll try to link those in this post if I can remember. Cheers.</p>","frontmatter":{"title":"Getting Started With SQL","date":"March 20, 2016","description":"Learning the basics of SQL programming and Database querying"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"getting-started-with-sql","previous":{"frontmatter":{"slug":"life-hacks-truths-values","title":"Life Hacks, Truths & Values"}},"next":{"frontmatter":{"slug":"how-to-track-object-changes-javascript","title":"How to track object changes in Javascript"}}}}